<!DOCTYPE html>
<html>

<head>

  <meta charset="UTF-8">
  <title>Página de Clientes</title>
  <!-- Link CSS e JS-->
  <link rel="stylesheet" href="/static/clientes/css/lista_clientes.css">
  <script src="/static/clientes/js/lista_clientes.js"></script>

</head>

<body>

  <!-- Formulário para enviar o ID do cliente selecionado -->
  <form id="cliente-form" action="{% url 'lista_clientes' %}" method="POST">{% csrf_token %}
    <input type="hidden" id="cliente-id" name="cliente_id">
  </form>

  <div class="container">
    <h4>Início &gt; Clientes</h4>
    <h2>Página de Clientes</h2>
    
    <div>
      <button class="button" onclick="RedirecionarPag('../../home/home')">Voltar</button>
    </div>

    <div> <!-- Barra de pesquisa e filtro -->
      <input class="search-box" type="text" id="search-input" placeholder="Pesquisar cliente..." onkeyup="PesquisarCliente()">

      <select class="filter-box" id="filter-select" onchange="FiltrarClientes()">
        <option value="todos">Todos</option>
        <option value="ativo">Ativo</option>
        <option value="inativo">Inativo</option>
      </select>
    </div>

    <div class="treeview-container">
      <table>
        <thead> <!-- Cabeçalho da tabela -->
          <tr>
            <th>ID</th>
            <th>Estado da Conta</th>
            <th>Tipo</th>
            <th>Nome Completo</th>
            <th>Apelido</th>
            <th>Telefone</th>
            <th>Email</th>
          </tr>
        </thead>

        <tbody> <!-- Dados da tabela -->
          {% for row in data %}
          <tr class="treeview-item" data-tipo="{{ row.tipo }}" onclick="highlightRow(event)" ondblclick="AbrirPaginaCliente(event)">
            <td>{{ row.id }}</td>
            <td>{{ row.TIPO }}</td>
            <td>{{ row.ESTADO_CONTA }}</td>
            <td>{{ row.NOME_RAZAO }}</td>
            <td>{{ row.APELIDO_FANTASIA }}</td>
            <td>{{ row.TELEFONE1 }}</td>
            <td>{{ row.EMAIL }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div>
      <a class="button" href="">Clientes em atraso</a>
      <a class="button" href="/clientes/cadastro_cliente">Cadastrar novo cliente</a>
    </div>
  </div>
</body>

</html>
